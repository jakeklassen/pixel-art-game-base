{"mappings":"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","sources":["./node_modules/@parcel/scope-hoisting/lib/helpers.js","./node_modules/@parcel/runtime-js/lib/bundle-manifest.js","./node_modules/@parcel/runtime-js/lib/JSRuntime.js","./node_modules/resource-loader/dist/resource-loader.esm.js","./node_modules/type-signals/dist/type-signals.esm.js","./node_modules/parse-uri/index.js","./node_modules/@parcel/runtime-js/lib/bundle-url.js","./node_modules/@parcel/runtime-js/lib/relative-path.js","./src/game.ts","./src/lib/screen.ts"],"sourcesContent":["var $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _plugin() {\n  const data = require(\"@parcel/plugin\");\n\n  _plugin = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _utils() {\n  const data = require(\"@parcel/utils\");\n\n  _utils = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _path() {\n  const data = _interopRequireDefault(require(\"path\"));\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _nullthrows() {\n  const data = _interopRequireDefault(require(\"nullthrows\"));\n\n  _nullthrows = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// List of browsers that support dynamic import natively\n// https://caniuse.com/#feat=es6-module-dynamic-import\nconst DYNAMIC_IMPORT_BROWSERS = {\n  edge: '76',\n  firefox: '67',\n  chrome: '63',\n  safari: '11.1',\n  opera: '50'\n}; // Used for as=\"\" in preload/prefetch\n\nconst TYPE_TO_RESOURCE_PRIORITY = {\n  css: 'style',\n  js: 'script'\n};\nconst BROWSER_PRELOAD_LOADER = './loaders/browser/preload-loader';\nconst BROWSER_PREFETCH_LOADER = './loaders/browser/prefetch-loader';\nconst LOADERS = {\n  browser: {\n    css: './loaders/browser/css-loader',\n    html: './loaders/browser/html-loader',\n    js: './loaders/browser/js-loader',\n    wasm: './loaders/browser/wasm-loader',\n    IMPORT_POLYFILL: './loaders/browser/import-polyfill'\n  },\n  worker: {\n    js: './loaders/worker/js-loader',\n    wasm: './loaders/worker/wasm-loader',\n    IMPORT_POLYFILL: false\n  },\n  node: {\n    css: './loaders/node/css-loader',\n    html: './loaders/node/html-loader',\n    js: './loaders/node/js-loader',\n    wasm: './loaders/node/wasm-loader',\n    IMPORT_POLYFILL: null\n  }\n};\n\nfunction getLoaders(ctx) {\n  if (ctx.isWorker()) return LOADERS.worker;\n  if (ctx.isBrowser()) return LOADERS.browser;\n  if (ctx.isNode()) return LOADERS.node;\n  return null;\n} // This cache should be invalidated if new dependencies get added to the bundle without the bundle objects changing\n// This can happen when we reuse the BundleGraph between subsequent builds\n\n\nlet bundleDependencies = new WeakMap();\n\nvar _default = new (_plugin().Runtime)({\n  apply({\n    bundle,\n    bundleGraph,\n    options\n  }) {\n    // Dependency ids in code replaced with referenced bundle names\n    // Loader runtime added for bundle groups that don't have a native loader (e.g. HTML/CSS/Worker - isURL?),\n    // and which are not loaded by a parent bundle.\n    // Loaders also added for modules that were moved to a separate bundle because they are a different type\n    // (e.g. WASM, HTML). These should be preloaded prior to the bundle being executed. Replace the entry asset(s)\n    // with the preload module.\n    if (bundle.type !== 'js') {\n      return;\n    }\n\n    let {\n      asyncDependencies,\n      otherDependencies\n    } = getDependencies(bundle);\n    let assets = [];\n\n    for (let dependency of asyncDependencies) {\n      let resolved = bundleGraph.resolveAsyncDependency(dependency, bundle);\n\n      if (resolved == null) {\n        continue;\n      }\n\n      if (resolved.type === 'asset') {\n        if (!bundle.env.shouldScopeHoist) {\n          // If this bundle already has the asset this dependency references,\n          // return a simple runtime of `Promise.resolve(internalRequire(assetId))`.\n          // The linker handles this for scope-hoisting.\n          assets.push({\n            filePath: __filename,\n            code: `module.exports = Promise.resolve(module.bundle.root(${JSON.stringify(bundleGraph.getAssetPublicId(resolved.value))}))`,\n            dependency\n          });\n        }\n      } else {\n        let loaderRuntime = getLoaderRuntime({\n          bundle,\n          dependency,\n          bundleGraph,\n          bundleGroup: resolved.value,\n          options\n        });\n\n        if (loaderRuntime != null) {\n          assets.push(loaderRuntime);\n        }\n      }\n    }\n\n    for (let dependency of otherDependencies) {\n      // Resolve the dependency to a bundle. If inline, export the dependency id,\n      // which will be replaced with the contents of that bundle later.\n      let referencedBundle = bundleGraph.getReferencedBundle(dependency, bundle);\n\n      if (referencedBundle !== null && referencedBundle !== void 0 && referencedBundle.isInline) {\n        assets.push({\n          filePath: _path().default.join(__dirname, `/bundles/${referencedBundle.id}.js`),\n          code: `module.exports = ${JSON.stringify(dependency.id)};`,\n          dependency\n        });\n        continue;\n      } // Otherwise, try to resolve the dependency to an external bundle group\n      // and insert a URL to that bundle.\n\n\n      let resolved = bundleGraph.resolveAsyncDependency(dependency, bundle);\n\n      if (dependency.isURL && resolved == null) {\n        // If a URL dependency was not able to be resolved, add a runtime that\n        // exports the original moduleSpecifier.\n        assets.push({\n          filePath: __filename,\n          code: `module.exports = ${JSON.stringify(dependency.moduleSpecifier)}`,\n          dependency\n        });\n        continue;\n      }\n\n      if (resolved == null || resolved.type !== 'bundle_group') {\n        continue;\n      }\n\n      let bundleGroup = resolved.value;\n      let mainBundle = (0, _nullthrows().default)(bundleGraph.getBundlesInBundleGroup(bundleGroup).find(b => {\n        let entries = b.getEntryAssets();\n        return entries.some(e => bundleGroup.entryAssetId === e.id);\n      }));\n\n      if (bundle.env.outputFormat === 'commonjs' && mainBundle.type === 'js') {\n        assets.push({\n          filePath: __filename,\n          dependency,\n          code: `module.exports = require(\"./\" + ${getRelativePathExpr(bundle, mainBundle, options)})`\n        });\n        continue;\n      } // URL dependency or not, fall back to including a runtime that exports the url\n\n\n      assets.push(getURLRuntime(dependency, bundle, mainBundle, options));\n    } // In development, bundles can be created lazily. This means that the parent bundle may not\n    // know about all of the sibling bundles of a child when it is written for the first time.\n    // Therefore, we need to also ensure that the siblings are loaded when the child loads.\n\n\n    if (options.shouldBuildLazily && bundle.env.outputFormat === 'global') {\n      let referenced = bundleGraph.getReferencedBundles(bundle).filter(b => !b.isInline);\n\n      for (let referencedBundle of referenced) {\n        let loaders = getLoaders(bundle.env);\n\n        if (!loaders) {\n          continue;\n        }\n\n        let loader = loaders[referencedBundle.type];\n\n        if (!loader) {\n          continue;\n        }\n\n        let relativePathExpr = getRelativePathExpr(bundle, referencedBundle, options);\n        let loaderCode = `require(${JSON.stringify(loader)})(require('./bundle-url').getBundleURL() + ${relativePathExpr})`;\n        assets.push({\n          filePath: __filename,\n          code: loaderCode,\n          isEntry: true\n        });\n      }\n    }\n\n    if (shouldUseRuntimeManifest(bundle, options) && bundleGraph.getChildBundles(bundle).length > 0 && isNewContext(bundle, bundleGraph)) {\n      assets.push({\n        filePath: __filename,\n        code: getRegisterCode(bundle, bundleGraph),\n        isEntry: true\n      });\n    }\n\n    return assets;\n  }\n\n});\n\nexports.default = _default;\n\nfunction getDependencies(bundle) {\n  let cachedDependencies = bundleDependencies.get(bundle);\n\n  if (cachedDependencies) {\n    return cachedDependencies;\n  } else {\n    let asyncDependencies = [];\n    let otherDependencies = [];\n    bundle.traverse(node => {\n      if (node.type !== 'dependency') {\n        return;\n      }\n\n      let dependency = node.value;\n\n      if (dependency.isAsync && !dependency.isURL) {\n        asyncDependencies.push(dependency);\n      } else {\n        otherDependencies.push(dependency);\n      }\n    });\n    bundleDependencies.set(bundle, {\n      asyncDependencies,\n      otherDependencies\n    });\n    return {\n      asyncDependencies,\n      otherDependencies\n    };\n  }\n}\n\nfunction getLoaderRuntime({\n  bundle,\n  dependency,\n  bundleGroup,\n  bundleGraph,\n  options\n}) {\n  let loaders = getLoaders(bundle.env);\n\n  if (loaders == null) {\n    return;\n  }\n\n  let externalBundles = bundleGraph.getBundlesInBundleGroup(bundleGroup).filter(bundle => !bundle.isInline);\n  let mainBundle = (0, _nullthrows().default)(externalBundles.find(bundle => {\n    var _bundle$getMainEntry;\n\n    return ((_bundle$getMainEntry = bundle.getMainEntry()) === null || _bundle$getMainEntry === void 0 ? void 0 : _bundle$getMainEntry.id) === bundleGroup.entryAssetId;\n  })); // CommonJS is a synchronous module system, so there is no need to load bundles in parallel.\n  // Importing of the other bundles will be handled by the bundle group entry.\n  // Do the same thing in library mode for ES modules, as we are building for another bundler\n  // and the imports for sibling bundles will be in the target bundle.\n  // Also do this when building lazily or the runtime itself could get deduplicated and only\n  // exist in the parent. This causes errors if an old version of the parent without the runtime\n  // is already loaded.\n\n  if (bundle.env.outputFormat === 'commonjs' || bundle.env.isLibrary || options.shouldBuildLazily) {\n    externalBundles = [mainBundle];\n  } else {\n    // Otherwise, load the bundle group entry after the others.\n    externalBundles.splice(externalBundles.indexOf(mainBundle), 1);\n    externalBundles.reverse().push(mainBundle);\n  } // Determine if we need to add a dynamic import() polyfill, or if all target browsers support it natively.\n\n\n  let needsDynamicImportPolyfill = false;\n\n  if (bundle.env.isBrowser() && bundle.env.outputFormat === 'esmodule') {\n    needsDynamicImportPolyfill = !bundle.env.matchesEngines(DYNAMIC_IMPORT_BROWSERS);\n  }\n\n  let loaderModules = externalBundles.map(to => {\n    let loader = loaders[to.type];\n\n    if (!loader) {\n      return;\n    }\n\n    let relativePathExpr = getRelativePathExpr(bundle, to, options); // Use esmodule loader if possible\n\n    if (to.type === 'js' && to.env.outputFormat === 'esmodule') {\n      if (!needsDynamicImportPolyfill) {\n        return `import(\"./\" + ${relativePathExpr})`;\n      }\n\n      loader = (0, _nullthrows().default)(loaders.IMPORT_POLYFILL, `No import() polyfill available for context '${bundle.env.context}'`);\n    } else if (to.type === 'js' && to.env.outputFormat === 'commonjs') {\n      return `Promise.resolve(require(\"./\" + ${relativePathExpr}))`;\n    }\n\n    let code = `require(${JSON.stringify(loader)})(require('./bundle-url').getBundleURL() + ${relativePathExpr})`; // In development, clear the require cache when an error occurs so the\n    // user can try again (e.g. after fixing a build error).\n\n    if (options.mode === 'development' && bundle.env.outputFormat === 'global') {\n      code += '.catch(err => {delete module.bundle.cache[module.id]; throw err;})';\n    }\n\n    return code;\n  }).filter(Boolean);\n\n  if (bundle.env.context === 'browser' && !options.shouldBuildLazily) {\n    loaderModules.push(...externalBundles // TODO: Allow css to preload resources as well\n    .filter(to => to.type === 'js').flatMap(from => {\n      let {\n        preload,\n        prefetch\n      } = getHintedBundleGroups(bundleGraph, from);\n      return [...getHintLoaders(bundleGraph, bundle, preload, BROWSER_PRELOAD_LOADER, options), ...getHintLoaders(bundleGraph, bundle, prefetch, BROWSER_PREFETCH_LOADER, options)];\n    }));\n  }\n\n  if (loaderModules.length === 0) {\n    return;\n  }\n\n  let loaderCode = loaderModules.join(', ');\n\n  if (loaderModules.length > 1 && (bundle.env.outputFormat === 'global' || !externalBundles.every(b => b.type === 'js'))) {\n    loaderCode = `Promise.all([${loaderCode}])`;\n\n    if (bundle.env.outputFormat !== 'global') {\n      loaderCode += `.then(r => r[r.length - 1])`;\n    }\n  } else {\n    loaderCode = `(${loaderCode})`;\n  }\n\n  if (bundle.env.outputFormat === 'global' && mainBundle.type === 'js') {\n    loaderCode += `.then(() => module.bundle.root('${bundleGraph.getAssetPublicId(bundleGraph.getAssetById(bundleGroup.entryAssetId))}')${// In global output with scope hoisting, functions return exports are\n    // always returned. Otherwise, the exports are returned.\n    bundle.env.shouldScopeHoist ? '()' : ''})`;\n  }\n\n  return {\n    filePath: __filename,\n    code: `module.exports = ${loaderCode};`,\n    dependency\n  };\n}\n\nfunction getHintedBundleGroups(bundleGraph, bundle) {\n  let preload = [];\n  let prefetch = [];\n  let {\n    asyncDependencies\n  } = getDependencies(bundle);\n\n  for (let dependency of asyncDependencies) {\n    var _dependency$meta;\n\n    let attributes = (_dependency$meta = dependency.meta) === null || _dependency$meta === void 0 ? void 0 : _dependency$meta.importAttributes;\n\n    if (typeof attributes === 'object' && attributes != null && ( // $FlowFixMe\n    attributes.preload || attributes.prefetch)) {\n      let resolved = bundleGraph.resolveAsyncDependency(dependency, bundle);\n\n      if ((resolved === null || resolved === void 0 ? void 0 : resolved.type) === 'bundle_group') {\n        // === true for flow\n        if (attributes.preload === true) {\n          preload.push(resolved.value);\n        }\n\n        if (attributes.prefetch === true) {\n          prefetch.push(resolved.value);\n        }\n      }\n    }\n  }\n\n  return {\n    preload,\n    prefetch\n  };\n}\n\nfunction getHintLoaders(bundleGraph, from, bundleGroups, loader, options) {\n  let hintLoaders = [];\n\n  for (let bundleGroupToPreload of bundleGroups) {\n    let bundlesToPreload = bundleGraph.getBundlesInBundleGroup(bundleGroupToPreload);\n\n    for (let bundleToPreload of bundlesToPreload) {\n      let relativePathExpr = getRelativePathExpr(from, bundleToPreload, options);\n      let priority = TYPE_TO_RESOURCE_PRIORITY[bundleToPreload.type];\n      hintLoaders.push(`require(${JSON.stringify(loader)})(require('./bundle-url').getBundleURL() + ${relativePathExpr}, ${priority ? JSON.stringify(priority) : 'null'}, ${JSON.stringify(bundleToPreload.target.env.outputFormat === 'esmodule')})`);\n    }\n  }\n\n  return hintLoaders;\n}\n\nfunction isNewContext(bundle, bundleGraph) {\n  let parents = bundleGraph.getParentBundles(bundle);\n  return bundle.isEntry || parents.length === 0 || parents.some(parent => parent.env.context !== bundle.env.context || parent.type !== 'js');\n}\n\nfunction getURLRuntime(dependency, from, to, options) {\n  let relativePathExpr = getRelativePathExpr(from, to, options);\n\n  if (dependency.meta.webworker === true) {\n    return {\n      filePath: __filename,\n      code: `module.exports = require('./get-worker-url')(${relativePathExpr});`,\n      dependency\n    };\n  }\n\n  return {\n    filePath: __filename,\n    code: `module.exports = require('./bundle-url').getBundleURL() + ${relativePathExpr}`,\n    dependency\n  };\n}\n\nfunction getRegisterCode(entryBundle, bundleGraph) {\n  let idToName = {};\n  bundleGraph.traverseBundles((bundle, _, actions) => {\n    if (bundle.isInline) {\n      return;\n    }\n\n    idToName[bundle.publicId] = (0, _nullthrows().default)(bundle.name);\n\n    if (bundle !== entryBundle && isNewContext(bundle, bundleGraph)) {\n      // New contexts have their own manifests, so there's no need to continue.\n      actions.skipChildren();\n    }\n  }, entryBundle);\n  return \"require('./bundle-manifest').register(JSON.parse(\" + JSON.stringify(JSON.stringify(idToName)) + '));';\n}\n\nfunction getRelativePathExpr(from, to, options) {\n  if (shouldUseRuntimeManifest(from, options)) {\n    return `require('./relative-path')(${JSON.stringify(from.publicId)}, ${JSON.stringify(to.publicId)})`;\n  }\n\n  return JSON.stringify((0, _utils().relativeBundlePath)(from, to, {\n    leadingDotSlash: false\n  }));\n}\n\nfunction shouldUseRuntimeManifest(bundle, options) {\n  let env = bundle.env;\n  return !env.isLibrary && env.outputFormat === 'global' && env.isBrowser() && options.mode === 'production';\n}","/*!\n * resource-loader - v4.0.0-rc4\n * https://github.com/englercj/resource-loader\n * Compiled Sun, 08 Mar 2020 16:55:29 UTC\n *\n * resource-loader is licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { Signal } from 'type-signals';\nimport parseUri from 'parse-uri';\n\nvar AbstractLoadStrategy = (function () {\r\n    function AbstractLoadStrategy(config) {\r\n        this.config = config;\r\n        this.onError = new Signal();\r\n        this.onComplete = new Signal();\r\n        this.onProgress = new Signal();\r\n    }\r\n    return AbstractLoadStrategy;\r\n}());\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nfunction getExtension(url) {\r\n    var isDataUrl = url.indexOf('data:') === 0;\r\n    var ext = '';\r\n    if (isDataUrl) {\r\n        var slashIndex = url.indexOf('/');\r\n        ext = url.substring(slashIndex + 1, url.indexOf(';', slashIndex));\r\n    }\r\n    else {\r\n        var queryStart = url.indexOf('?');\r\n        var hashStart = url.indexOf('#');\r\n        var index = Math.min(queryStart > -1 ? queryStart : url.length, hashStart > -1 ? hashStart : url.length);\r\n        url = url.substring(0, index);\r\n        ext = url.substring(url.lastIndexOf('.') + 1);\r\n    }\r\n    return ext.toLowerCase();\r\n}\r\nfunction assertNever(x) {\r\n    throw new Error('Unexpected value. Should have been never.');\r\n}\n\nvar ResourceType;\r\n(function (ResourceType) {\r\n    ResourceType[ResourceType[\"Unknown\"] = 0] = \"Unknown\";\r\n    ResourceType[ResourceType[\"Buffer\"] = 1] = \"Buffer\";\r\n    ResourceType[ResourceType[\"Blob\"] = 2] = \"Blob\";\r\n    ResourceType[ResourceType[\"Json\"] = 3] = \"Json\";\r\n    ResourceType[ResourceType[\"Xml\"] = 4] = \"Xml\";\r\n    ResourceType[ResourceType[\"Image\"] = 5] = \"Image\";\r\n    ResourceType[ResourceType[\"Audio\"] = 6] = \"Audio\";\r\n    ResourceType[ResourceType[\"Video\"] = 7] = \"Video\";\r\n    ResourceType[ResourceType[\"Text\"] = 8] = \"Text\";\r\n})(ResourceType || (ResourceType = {}));\r\nvar ResourceState;\r\n(function (ResourceState) {\r\n    ResourceState[ResourceState[\"NotStarted\"] = 0] = \"NotStarted\";\r\n    ResourceState[ResourceState[\"Loading\"] = 1] = \"Loading\";\r\n    ResourceState[ResourceState[\"Complete\"] = 2] = \"Complete\";\r\n})(ResourceState || (ResourceState = {}));\n\nvar MediaElementLoadStrategy = (function (_super) {\r\n    __extends(MediaElementLoadStrategy, _super);\r\n    function MediaElementLoadStrategy(config, elementType) {\r\n        var _this = _super.call(this, config) || this;\r\n        _this.elementType = elementType;\r\n        _this._boundOnLoad = _this._onLoad.bind(_this);\r\n        _this._boundOnError = _this._onError.bind(_this);\r\n        _this._boundOnTimeout = _this._onTimeout.bind(_this);\r\n        _this._element = _this._createElement();\r\n        _this._elementTimer = 0;\r\n        return _this;\r\n    }\r\n    MediaElementLoadStrategy.prototype.load = function () {\r\n        var config = this.config;\r\n        if (config.crossOrigin)\r\n            this._element.crossOrigin = config.crossOrigin;\r\n        var urls = config.sourceSet || [config.url];\r\n        if (navigator.isCocoonJS) {\r\n            this._element.src = urls[0];\r\n        }\r\n        else {\r\n            for (var i = 0; i < urls.length; ++i) {\r\n                var url = urls[i];\r\n                var mimeType = config.mimeTypes ? config.mimeTypes[i] : undefined;\r\n                if (!mimeType)\r\n                    mimeType = this.elementType + \"/\" + getExtension(url);\r\n                var source = document.createElement('source');\r\n                source.src = url;\r\n                source.type = mimeType;\r\n                this._element.appendChild(source);\r\n            }\r\n        }\r\n        this._element.addEventListener('load', this._boundOnLoad, false);\r\n        this._element.addEventListener('canplaythrough', this._boundOnLoad, false);\r\n        this._element.addEventListener('error', this._boundOnError, false);\r\n        this._element.load();\r\n        if (config.timeout)\r\n            this._elementTimer = window.setTimeout(this._boundOnTimeout, config.timeout);\r\n    };\r\n    MediaElementLoadStrategy.prototype.abort = function () {\r\n        this._clearEvents();\r\n        while (this._element.firstChild) {\r\n            this._element.removeChild(this._element.firstChild);\r\n        }\r\n        this._error(this.elementType + \" load aborted by the user.\");\r\n    };\r\n    MediaElementLoadStrategy.prototype._createElement = function () {\r\n        if (this.config.loadElement)\r\n            return this.config.loadElement;\r\n        else\r\n            return document.createElement(this.elementType);\r\n    };\r\n    MediaElementLoadStrategy.prototype._clearEvents = function () {\r\n        clearTimeout(this._elementTimer);\r\n        this._element.removeEventListener('load', this._boundOnLoad, false);\r\n        this._element.removeEventListener('canplaythrough', this._boundOnLoad, false);\r\n        this._element.removeEventListener('error', this._boundOnError, false);\r\n    };\r\n    MediaElementLoadStrategy.prototype._error = function (errMessage) {\r\n        this._clearEvents();\r\n        this.onError.dispatch(errMessage);\r\n    };\r\n    MediaElementLoadStrategy.prototype._complete = function () {\r\n        this._clearEvents();\r\n        var resourceType = ResourceType.Unknown;\r\n        switch (this.elementType) {\r\n            case 'audio':\r\n                resourceType = ResourceType.Audio;\r\n                break;\r\n            case 'video':\r\n                resourceType = ResourceType.Video;\r\n                break;\r\n            default: assertNever(this.elementType);\r\n        }\r\n        this.onComplete.dispatch(resourceType, this._element);\r\n    };\r\n    MediaElementLoadStrategy.prototype._onLoad = function () {\r\n        this._complete();\r\n    };\r\n    MediaElementLoadStrategy.prototype._onError = function () {\r\n        this._error(this.elementType + \" failed to load.\");\r\n    };\r\n    MediaElementLoadStrategy.prototype._onTimeout = function () {\r\n        this._error(this.elementType + \" load timed out.\");\r\n    };\r\n    return MediaElementLoadStrategy;\r\n}(AbstractLoadStrategy));\n\nvar AudioLoadStrategy = (function (_super) {\r\n    __extends(AudioLoadStrategy, _super);\r\n    function AudioLoadStrategy(config) {\r\n        return _super.call(this, config, 'audio') || this;\r\n    }\r\n    return AudioLoadStrategy;\r\n}(MediaElementLoadStrategy));\n\nvar EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\r\nvar ImageLoadStrategy = (function (_super) {\r\n    __extends(ImageLoadStrategy, _super);\r\n    function ImageLoadStrategy() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._boundOnLoad = _this._onLoad.bind(_this);\r\n        _this._boundOnError = _this._onError.bind(_this);\r\n        _this._boundOnTimeout = _this._onTimeout.bind(_this);\r\n        _this._element = _this._createElement();\r\n        _this._elementTimer = 0;\r\n        return _this;\r\n    }\r\n    ImageLoadStrategy.prototype.load = function () {\r\n        var config = this.config;\r\n        if (config.crossOrigin)\r\n            this._element.crossOrigin = config.crossOrigin;\r\n        this._element.src = config.url;\r\n        this._element.addEventListener('load', this._boundOnLoad, false);\r\n        this._element.addEventListener('error', this._boundOnError, false);\r\n        if (config.timeout)\r\n            this._elementTimer = window.setTimeout(this._boundOnTimeout, config.timeout);\r\n    };\r\n    ImageLoadStrategy.prototype.abort = function () {\r\n        this._clearEvents();\r\n        this._element.src = EMPTY_GIF;\r\n        this._error('Image load aborted by the user.');\r\n    };\r\n    ImageLoadStrategy.prototype._createElement = function () {\r\n        if (this.config.loadElement)\r\n            return this.config.loadElement;\r\n        else\r\n            return document.createElement('img');\r\n    };\r\n    ImageLoadStrategy.prototype._clearEvents = function () {\r\n        clearTimeout(this._elementTimer);\r\n        this._element.removeEventListener('load', this._boundOnLoad, false);\r\n        this._element.removeEventListener('error', this._boundOnError, false);\r\n    };\r\n    ImageLoadStrategy.prototype._error = function (errMessage) {\r\n        this._clearEvents();\r\n        this.onError.dispatch(errMessage);\r\n    };\r\n    ImageLoadStrategy.prototype._complete = function () {\r\n        this._clearEvents();\r\n        this.onComplete.dispatch(ResourceType.Image, this._element);\r\n    };\r\n    ImageLoadStrategy.prototype._onLoad = function () {\r\n        this._complete();\r\n    };\r\n    ImageLoadStrategy.prototype._onError = function () {\r\n        this._error('Image failed to load.');\r\n    };\r\n    ImageLoadStrategy.prototype._onTimeout = function () {\r\n        this._error('Image load timed out.');\r\n    };\r\n    return ImageLoadStrategy;\r\n}(AbstractLoadStrategy));\n\nvar VideoLoadStrategy = (function (_super) {\r\n    __extends(VideoLoadStrategy, _super);\r\n    function VideoLoadStrategy(config) {\r\n        return _super.call(this, config, 'video') || this;\r\n    }\r\n    return VideoLoadStrategy;\r\n}(MediaElementLoadStrategy));\n\nvar useXdr = !!(window.XDomainRequest && !('withCredentials' in (new XMLHttpRequest())));\r\nvar XhrResponseType;\r\n(function (XhrResponseType) {\r\n    XhrResponseType[\"Default\"] = \"text\";\r\n    XhrResponseType[\"Buffer\"] = \"arraybuffer\";\r\n    XhrResponseType[\"Blob\"] = \"blob\";\r\n    XhrResponseType[\"Document\"] = \"document\";\r\n    XhrResponseType[\"Json\"] = \"json\";\r\n    XhrResponseType[\"Text\"] = \"text\";\r\n})(XhrResponseType || (XhrResponseType = {}));\r\nfunction reqType(xhr) {\r\n    return xhr.toString().replace('object ', '');\r\n}\r\nvar XhrLoadStrategy = (function (_super) {\r\n    __extends(XhrLoadStrategy, _super);\r\n    function XhrLoadStrategy() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._boundOnLoad = _this._onLoad.bind(_this);\r\n        _this._boundOnAbort = _this._onAbort.bind(_this);\r\n        _this._boundOnError = _this._onError.bind(_this);\r\n        _this._boundOnTimeout = _this._onTimeout.bind(_this);\r\n        _this._boundOnProgress = _this._onProgress.bind(_this);\r\n        _this._xhr = _this._createRequest();\r\n        _this._xhrType = XhrResponseType.Default;\r\n        return _this;\r\n    }\r\n    XhrLoadStrategy.prototype.load = function () {\r\n        var config = this.config;\r\n        var ext = getExtension(config.url);\r\n        if (typeof config.xhrType !== 'string') {\r\n            config.xhrType = this._determineXhrType(ext);\r\n        }\r\n        var xhr = this._xhr;\r\n        this._xhrType = config.xhrType || XhrResponseType.Default;\r\n        if (useXdr) {\r\n            xhr.timeout = config.timeout || 5000;\r\n            xhr.onload = this._boundOnLoad;\r\n            xhr.onerror = this._boundOnError;\r\n            xhr.ontimeout = this._boundOnTimeout;\r\n            xhr.onprogress = this._boundOnProgress;\r\n            xhr.open('GET', config.url, true);\r\n            setTimeout(function () { xhr.send(); }, 0);\r\n        }\r\n        else {\r\n            xhr.open('GET', config.url, true);\r\n            if (config.timeout)\r\n                xhr.timeout = config.timeout;\r\n            if (config.xhrType === XhrResponseType.Json || config.xhrType === XhrResponseType.Document)\r\n                xhr.responseType = XhrResponseType.Text;\r\n            else\r\n                xhr.responseType = config.xhrType;\r\n            xhr.addEventListener('load', this._boundOnLoad, false);\r\n            xhr.addEventListener('abort', this._boundOnAbort, false);\r\n            xhr.addEventListener('error', this._boundOnError, false);\r\n            xhr.addEventListener('timeout', this._boundOnTimeout, false);\r\n            xhr.addEventListener('progress', this._boundOnProgress, false);\r\n            xhr.send();\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype.abort = function () {\r\n        if (useXdr) {\r\n            this._clearEvents();\r\n            this._xhr.abort();\r\n            this._onAbort();\r\n        }\r\n        else {\r\n            this._xhr.abort();\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype._createRequest = function () {\r\n        if (useXdr)\r\n            return new window.XDomainRequest();\r\n        else\r\n            return new XMLHttpRequest();\r\n    };\r\n    XhrLoadStrategy.prototype._determineXhrType = function (ext) {\r\n        return XhrLoadStrategy._xhrTypeMap[ext] || XhrResponseType.Default;\r\n    };\r\n    XhrLoadStrategy.prototype._clearEvents = function () {\r\n        if (useXdr) {\r\n            this._xhr.onload = null;\r\n            this._xhr.onerror = null;\r\n            this._xhr.ontimeout = null;\r\n            this._xhr.onprogress = null;\r\n        }\r\n        else {\r\n            this._xhr.removeEventListener('load', this._boundOnLoad, false);\r\n            this._xhr.removeEventListener('abort', this._boundOnAbort, false);\r\n            this._xhr.removeEventListener('error', this._boundOnError, false);\r\n            this._xhr.removeEventListener('timeout', this._boundOnTimeout, false);\r\n            this._xhr.removeEventListener('progress', this._boundOnProgress, false);\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype._error = function (errMessage) {\r\n        this._clearEvents();\r\n        this.onError.dispatch(errMessage);\r\n    };\r\n    XhrLoadStrategy.prototype._complete = function (type, data) {\r\n        this._clearEvents();\r\n        this.onComplete.dispatch(type, data);\r\n    };\r\n    XhrLoadStrategy.prototype._onLoad = function () {\r\n        var xhr = this._xhr;\r\n        var text = '';\r\n        var status = typeof xhr.status === 'undefined' ? 200 : xhr.status;\r\n        if (typeof xhr.responseType === 'undefined' || xhr.responseType === '' || xhr.responseType === 'text') {\r\n            text = xhr.responseText;\r\n        }\r\n        if (status === 0 && (text.length > 0 || xhr.responseType === XhrResponseType.Buffer)) {\r\n            status = 200;\r\n        }\r\n        else if (status === 1223) {\r\n            status = 204;\r\n        }\r\n        var flattenedStatus = Math.floor(status / 100) * 100;\r\n        if (flattenedStatus !== 200) {\r\n            this._error(\"[\" + xhr.status + \"] \" + xhr.statusText + \": \" + xhr.responseURL);\r\n            return;\r\n        }\r\n        switch (this._xhrType) {\r\n            case XhrResponseType.Buffer:\r\n                this._complete(ResourceType.Buffer, xhr.response);\r\n                break;\r\n            case XhrResponseType.Blob:\r\n                this._complete(ResourceType.Blob, xhr.response);\r\n                break;\r\n            case XhrResponseType.Document:\r\n                this._parseDocument(text);\r\n                break;\r\n            case XhrResponseType.Json:\r\n                this._parseJson(text);\r\n                break;\r\n            case XhrResponseType.Default:\r\n            case XhrResponseType.Text:\r\n                this._complete(ResourceType.Text, text);\r\n                break;\r\n            default:\r\n                assertNever(this._xhrType);\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype._parseDocument = function (text) {\r\n        try {\r\n            if (window.DOMParser) {\r\n                var parser = new DOMParser();\r\n                var data = parser.parseFromString(text, 'text/xml');\r\n                this._complete(ResourceType.Xml, data);\r\n            }\r\n            else {\r\n                var div = document.createElement('div');\r\n                div.innerHTML = text;\r\n                this._complete(ResourceType.Xml, div);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this._error(\"Error trying to parse loaded xml: \" + e);\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype._parseJson = function (text) {\r\n        try {\r\n            var data = JSON.parse(text);\r\n            this._complete(ResourceType.Json, data);\r\n        }\r\n        catch (e) {\r\n            this._error(\"Error trying to parse loaded json: \" + e);\r\n        }\r\n    };\r\n    XhrLoadStrategy.prototype._onAbort = function () {\r\n        var xhr = this._xhr;\r\n        this._error(reqType(xhr) + \" Request was aborted by the user.\");\r\n    };\r\n    XhrLoadStrategy.prototype._onError = function () {\r\n        var xhr = this._xhr;\r\n        this._error(reqType(xhr) + \" Request failed. Status: \" + xhr.status + \", text: \\\"\" + xhr.statusText + \"\\\"\");\r\n    };\r\n    XhrLoadStrategy.prototype._onTimeout = function () {\r\n        var xhr = this._xhr;\r\n        this._error(reqType(xhr) + \" Request timed out.\");\r\n    };\r\n    XhrLoadStrategy.prototype._onProgress = function (event) {\r\n        if (event && event.lengthComputable) {\r\n            this.onProgress.dispatch(event.loaded / event.total);\r\n        }\r\n    };\r\n    XhrLoadStrategy.setExtensionXhrType = function (extname, xhrType) {\r\n        if (extname && extname.indexOf('.') === 0)\r\n            extname = extname.substring(1);\r\n        if (!extname)\r\n            return;\r\n        XhrLoadStrategy._xhrTypeMap[extname] = xhrType;\r\n    };\r\n    XhrLoadStrategy.ResponseType = XhrResponseType;\r\n    XhrLoadStrategy._xhrTypeMap = {\r\n        xhtml: XhrResponseType.Document,\r\n        html: XhrResponseType.Document,\r\n        htm: XhrResponseType.Document,\r\n        xml: XhrResponseType.Document,\r\n        tmx: XhrResponseType.Document,\r\n        svg: XhrResponseType.Document,\r\n        tsx: XhrResponseType.Document,\r\n        gif: XhrResponseType.Blob,\r\n        png: XhrResponseType.Blob,\r\n        bmp: XhrResponseType.Blob,\r\n        jpg: XhrResponseType.Blob,\r\n        jpeg: XhrResponseType.Blob,\r\n        tif: XhrResponseType.Blob,\r\n        tiff: XhrResponseType.Blob,\r\n        webp: XhrResponseType.Blob,\r\n        tga: XhrResponseType.Blob,\r\n        json: XhrResponseType.Json,\r\n        text: XhrResponseType.Text,\r\n        txt: XhrResponseType.Text,\r\n        ttf: XhrResponseType.Buffer,\r\n        otf: XhrResponseType.Buffer,\r\n    };\r\n    return XhrLoadStrategy;\r\n}(AbstractLoadStrategy));\n\nfunction onlyOnce(func) {\r\n    var fn = func;\r\n    return function onceWrapper() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (fn === null)\r\n            throw new Error('Callback was already called.');\r\n        var callFn = fn;\r\n        fn = null;\r\n        return callFn.apply(this, args);\r\n    };\r\n}\r\nvar AsyncQueue = (function () {\r\n    function AsyncQueue(worker, concurrency) {\r\n        if (concurrency === void 0) { concurrency = 1; }\r\n        this.worker = worker;\r\n        this.concurrency = concurrency;\r\n        this.workers = 0;\r\n        this.buffer = 0;\r\n        this.paused = false;\r\n        this._started = false;\r\n        this._tasks = [];\r\n        this.onSaturated = new Signal();\r\n        this.onUnsaturated = new Signal();\r\n        this.onEmpty = new Signal();\r\n        this.onDrain = new Signal();\r\n        this.onError = new Signal();\r\n        if (concurrency === 0)\r\n            throw new Error('Concurrency must not be zero');\r\n        this.buffer = concurrency / 4;\r\n    }\r\n    Object.defineProperty(AsyncQueue.prototype, \"started\", {\r\n        get: function () { return this._started; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AsyncQueue.prototype.reset = function () {\r\n        this.onDrain.detachAll();\r\n        this.workers = 0;\r\n        this._started = false;\r\n        this._tasks = [];\r\n    };\r\n    AsyncQueue.prototype.push = function (data, callback) {\r\n        this._insert(data, false, callback);\r\n    };\r\n    AsyncQueue.prototype.unshift = function (data, callback) {\r\n        this._insert(data, true, callback);\r\n    };\r\n    AsyncQueue.prototype.process = function () {\r\n        while (!this.paused && this.workers < this.concurrency && this._tasks.length) {\r\n            var task = this._tasks.shift();\r\n            if (this._tasks.length === 0)\r\n                this.onEmpty.dispatch();\r\n            this.workers += 1;\r\n            if (this.workers === this.concurrency)\r\n                this.onSaturated.dispatch();\r\n            this.worker(task.data, onlyOnce(this._next(task)));\r\n        }\r\n    };\r\n    AsyncQueue.prototype.length = function () {\r\n        return this._tasks.length;\r\n    };\r\n    AsyncQueue.prototype.running = function () {\r\n        return this.workers;\r\n    };\r\n    AsyncQueue.prototype.idle = function () {\r\n        return this._tasks.length + this.workers === 0;\r\n    };\r\n    AsyncQueue.prototype.pause = function () {\r\n        if (this.paused === true)\r\n            return;\r\n        this.paused = true;\r\n    };\r\n    AsyncQueue.prototype.resume = function () {\r\n        if (this.paused === false)\r\n            return;\r\n        this.paused = false;\r\n        for (var w = 1; w <= this.concurrency; w++) {\r\n            this.process();\r\n        }\r\n    };\r\n    AsyncQueue.prototype.getTask = function (index) {\r\n        return this._tasks[index];\r\n    };\r\n    AsyncQueue.prototype._insert = function (data, insertAtFront, callback) {\r\n        var _this = this;\r\n        if (callback != null && typeof callback !== 'function') {\r\n            throw new Error('task callback must be a function');\r\n        }\r\n        this._started = true;\r\n        if (data == null && this.idle()) {\r\n            setTimeout(function () { return _this.onDrain.dispatch(); }, 1);\r\n            return;\r\n        }\r\n        var task = { data: data, callback: callback };\r\n        if (insertAtFront)\r\n            this._tasks.unshift(task);\r\n        else\r\n            this._tasks.push(task);\r\n        setTimeout(function () { return _this.process(); }, 1);\r\n    };\r\n    AsyncQueue.prototype._next = function (task) {\r\n        var _this = this;\r\n        return function (err) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            _this.workers -= 1;\r\n            if (task.callback)\r\n                task.callback.apply(task, __spreadArrays([err], args));\r\n            if (err)\r\n                _this.onError.dispatch(err, task.data);\r\n            if (_this.workers <= (_this.concurrency - _this.buffer))\r\n                _this.onUnsaturated.dispatch();\r\n            if (_this.idle())\r\n                _this.onDrain.dispatch();\r\n            _this.process();\r\n        };\r\n    };\r\n    return AsyncQueue;\r\n}());\n\nvar Resource = (function () {\r\n    function Resource(name, options) {\r\n        this.children = [];\r\n        this.onStart = new Signal();\r\n        this.onProgress = new Signal();\r\n        this.onComplete = new Signal();\r\n        this.onAfterMiddleware = new Signal();\r\n        this.data = null;\r\n        this.type = ResourceType.Unknown;\r\n        this.error = '';\r\n        this.progressChunk = 0;\r\n        this._dequeue = function () { };\r\n        this._onCompleteBinding = null;\r\n        this._state = ResourceState.NotStarted;\r\n        this.name = name;\r\n        this.metadata = options.metadata;\r\n        if (typeof options.crossOrigin !== 'string')\r\n            options.crossOrigin = this._determineCrossOrigin(options.url);\r\n        if (options.strategy && typeof options.strategy !== 'function') {\r\n            this._strategy = options.strategy;\r\n            this._strategy.config = options;\r\n        }\r\n        else {\r\n            var StrategyCtor = options.strategy;\r\n            if (!StrategyCtor)\r\n                StrategyCtor = Resource._loadStrategyMap[getExtension(options.url)];\r\n            if (!StrategyCtor)\r\n                StrategyCtor = Resource._defaultLoadStrategy;\r\n            this._strategy = new StrategyCtor(options);\r\n        }\r\n        this._strategy.onError.add(this._error, this);\r\n        this._strategy.onComplete.add(this._complete, this);\r\n        this._strategy.onProgress.add(this._progress, this);\r\n    }\r\n    Resource.setDefaultLoadStrategy = function (strategy) {\r\n        Resource._defaultLoadStrategy = strategy;\r\n    };\r\n    Resource.setLoadStrategy = function (extname, strategy) {\r\n        if (extname && extname.indexOf('.') === 0)\r\n            extname = extname.substring(1);\r\n        if (!extname)\r\n            return;\r\n        Resource._loadStrategyMap[extname] = strategy;\r\n    };\r\n    Object.defineProperty(Resource.prototype, \"strategy\", {\r\n        get: function () { return this._strategy; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resource.prototype, \"url\", {\r\n        get: function () { return this._strategy.config.url; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resource.prototype, \"isLoading\", {\r\n        get: function () { return this._state === ResourceState.Loading; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resource.prototype, \"isComplete\", {\r\n        get: function () { return this._state === ResourceState.Complete; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Resource.prototype.abort = function () {\r\n        this._strategy.abort();\r\n    };\r\n    Resource.prototype.load = function () {\r\n        this._state = ResourceState.Loading;\r\n        this.onStart.dispatch(this);\r\n        this._strategy.load();\r\n    };\r\n    Resource.prototype._error = function (errMessage) {\r\n        this._state = ResourceState.Complete;\r\n        this.error = errMessage;\r\n        this.onComplete.dispatch(this);\r\n    };\r\n    Resource.prototype._complete = function (type, data) {\r\n        this._state = ResourceState.Complete;\r\n        this.type = type;\r\n        this.data = data;\r\n        this.onComplete.dispatch(this);\r\n    };\r\n    Resource.prototype._progress = function (percent) {\r\n        this.onProgress.dispatch(this, percent);\r\n    };\r\n    Resource.prototype._determineCrossOrigin = function (url, loc) {\r\n        if (loc === void 0) { loc = window.location; }\r\n        if (url.indexOf('data:') === 0 || url.indexOf('javascript:') === 0)\r\n            return '';\r\n        if (window.origin !== window.location.origin)\r\n            return 'anonymous';\r\n        if (!Resource._tempAnchor)\r\n            Resource._tempAnchor = document.createElement('a');\r\n        Resource._tempAnchor.href = url;\r\n        var parsed = parseUri(Resource._tempAnchor.href, { strictMode: true });\r\n        var samePort = (!parsed.port && loc.port === '') || (parsed.port === loc.port);\r\n        var protocol = parsed.protocol ? parsed.protocol + \":\" : '';\r\n        if (parsed.host !== loc.hostname || !samePort || protocol !== loc.protocol)\r\n            return 'anonymous';\r\n        return '';\r\n    };\r\n    Resource._tempAnchor = null;\r\n    Resource._defaultLoadStrategy = XhrLoadStrategy;\r\n    Resource._loadStrategyMap = {\r\n        gif: ImageLoadStrategy,\r\n        png: ImageLoadStrategy,\r\n        bmp: ImageLoadStrategy,\r\n        jpg: ImageLoadStrategy,\r\n        jpeg: ImageLoadStrategy,\r\n        tif: ImageLoadStrategy,\r\n        tiff: ImageLoadStrategy,\r\n        webp: ImageLoadStrategy,\r\n        tga: ImageLoadStrategy,\r\n        svg: ImageLoadStrategy,\r\n        'svg+xml': ImageLoadStrategy,\r\n        mp3: AudioLoadStrategy,\r\n        ogg: AudioLoadStrategy,\r\n        wav: AudioLoadStrategy,\r\n        mp4: VideoLoadStrategy,\r\n        webm: VideoLoadStrategy,\r\n        mov: VideoLoadStrategy,\r\n    };\r\n    return Resource;\r\n}());\n\nfunction eachSeries(array, iterator, callback, deferNext) {\r\n    if (deferNext === void 0) { deferNext = false; }\r\n    var i = 0;\r\n    var len = array.length;\r\n    (function next(err) {\r\n        if (err || i === len) {\r\n            if (callback)\r\n                callback(err);\r\n            return;\r\n        }\r\n        if (deferNext)\r\n            setTimeout(function () { return iterator(array[i++], next); }, 1);\r\n        else\r\n            iterator(array[i++], next);\r\n    })();\r\n}\n\nvar MAX_PROGRESS = 100;\r\nvar rgxExtractUrlHash = /(#[\\w-]+)?$/;\r\nvar Loader = (function () {\r\n    function Loader(baseUrl, concurrency) {\r\n        if (baseUrl === void 0) { baseUrl = ''; }\r\n        if (concurrency === void 0) { concurrency = 10; }\r\n        this.progress = 0;\r\n        this.loading = false;\r\n        this.defaultQueryString = '';\r\n        this.resources = {};\r\n        this.onError = new Signal();\r\n        this.onLoad = new Signal();\r\n        this.onStart = new Signal();\r\n        this.onComplete = new Signal();\r\n        this.onProgress = new Signal();\r\n        this._baseUrl = '';\r\n        this._urlResolvers = [];\r\n        this._middleware = [];\r\n        this._resourcesParsing = [];\r\n        this._boundLoadResource = this._loadResource.bind(this);\r\n        this.baseUrl = baseUrl;\r\n        this._queue = new AsyncQueue(this._boundLoadResource, concurrency);\r\n        this._queue.pause();\r\n        this._middleware = Loader._defaultMiddleware.slice();\r\n    }\r\n    Object.defineProperty(Loader.prototype, \"baseUrl\", {\r\n        get: function () { return this._baseUrl; },\r\n        set: function (url) {\r\n            while (url.length && url.charAt(url.length - 1) === '/') {\r\n                url = url.slice(0, -1);\r\n            }\r\n            this._baseUrl = url;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Loader.prototype.add = function (options, url_) {\r\n        if (Array.isArray(options)) {\r\n            for (var i = 0; i < options.length; ++i) {\r\n                this.add(options[i]);\r\n            }\r\n            return this;\r\n        }\r\n        var url = '';\r\n        var name = '';\r\n        var baseUrl = this._baseUrl;\r\n        var resOptions = { url: '' };\r\n        if (typeof options === 'object') {\r\n            url = options.url;\r\n            name = options.name || options.url;\r\n            baseUrl = options.baseUrl || baseUrl;\r\n            resOptions = options;\r\n        }\r\n        else {\r\n            name = options;\r\n            if (typeof url_ === 'string')\r\n                url = url_;\r\n            else\r\n                url = name;\r\n        }\r\n        if (!url)\r\n            throw new Error('You must specify the `url` property.');\r\n        if (this.loading && !resOptions.parentResource) {\r\n            throw new Error('Cannot add root resources while the loader is running.');\r\n        }\r\n        if (this.resources[name]) {\r\n            throw new Error(\"Resource named \\\"\" + name + \"\\\" already exists.\");\r\n        }\r\n        url = this._prepareUrl(url, baseUrl);\r\n        resOptions.url = url;\r\n        var resource = new Resource(name, resOptions);\r\n        this.resources[name] = resource;\r\n        if (typeof resOptions.onComplete === 'function') {\r\n            resource.onAfterMiddleware.once(resOptions.onComplete);\r\n        }\r\n        if (this.loading) {\r\n            var parent_1 = resOptions.parentResource;\r\n            var incompleteChildren = [];\r\n            for (var i = 0; i < parent_1.children.length; ++i) {\r\n                if (!parent_1.children[i].isComplete) {\r\n                    incompleteChildren.push(parent_1.children[i]);\r\n                }\r\n            }\r\n            var fullChunk = parent_1.progressChunk * (incompleteChildren.length + 1);\r\n            var eachChunk = fullChunk / (incompleteChildren.length + 2);\r\n            parent_1.children.push(resource);\r\n            parent_1.progressChunk = eachChunk;\r\n            for (var i = 0; i < incompleteChildren.length; ++i) {\r\n                incompleteChildren[i].progressChunk = eachChunk;\r\n            }\r\n            resource.progressChunk = eachChunk;\r\n        }\r\n        this._queue.push(resource);\r\n        return this;\r\n    };\r\n    Loader.prototype.use = function (fn, priority) {\r\n        if (priority === void 0) { priority = Loader.DefaultMiddlewarePriority; }\r\n        this._middleware.push({ fn: fn, priority: priority });\r\n        this._middleware.sort(function (a, b) { return a.priority - b.priority; });\r\n        return this;\r\n    };\r\n    Loader.prototype.reset = function () {\r\n        this.progress = 0;\r\n        this.loading = false;\r\n        this._queue.reset();\r\n        this._queue.pause();\r\n        for (var k in this.resources) {\r\n            var res = this.resources[k];\r\n            if (!res)\r\n                continue;\r\n            if (res._onCompleteBinding)\r\n                res._onCompleteBinding.detach();\r\n            if (res.isLoading)\r\n                res.abort();\r\n        }\r\n        this.resources = {};\r\n        return this;\r\n    };\r\n    Loader.prototype.load = function (cb) {\r\n        if (typeof cb === 'function')\r\n            this.onComplete.once(cb);\r\n        if (this.loading)\r\n            return this;\r\n        if (this._queue.idle()) {\r\n            this._onStart();\r\n            this._onComplete();\r\n        }\r\n        else {\r\n            var numTasks = this._queue.length();\r\n            var chunk = MAX_PROGRESS / numTasks;\r\n            for (var i = 0; i < this._queue.length(); ++i) {\r\n                this._queue.getTask(i).data.progressChunk = chunk;\r\n            }\r\n            this._onStart();\r\n            this._queue.resume();\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(Loader.prototype, \"concurrency\", {\r\n        get: function () {\r\n            return this._queue.concurrency;\r\n        },\r\n        set: function (concurrency) {\r\n            this._queue.concurrency = concurrency;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Loader.prototype.addUrlResolver = function (func) {\r\n        this._urlResolvers.push(func);\r\n        return this;\r\n    };\r\n    Loader.prototype._prepareUrl = function (url, baseUrl) {\r\n        var parsed = parseUri(url, { strictMode: true });\r\n        this._urlResolvers.forEach(function (resolver) {\r\n            url = resolver(url, parsed);\r\n            parsed = parseUri(url, { strictMode: true });\r\n        });\r\n        if (!parsed.protocol && url.indexOf('//') !== 0) {\r\n            if (baseUrl.length && url.charAt(0) !== '/')\r\n                url = baseUrl + \"/\" + url;\r\n            else\r\n                url = baseUrl + url;\r\n        }\r\n        if (this.defaultQueryString) {\r\n            var match = rgxExtractUrlHash.exec(url);\r\n            if (match) {\r\n                var hash = match[0];\r\n                url = url.substr(0, url.length - hash.length);\r\n                if (url.indexOf('?') !== -1)\r\n                    url += \"&\" + this.defaultQueryString;\r\n                else\r\n                    url += \"?\" + this.defaultQueryString;\r\n                url += hash;\r\n            }\r\n        }\r\n        return url;\r\n    };\r\n    Loader.prototype._loadResource = function (resource, dequeue) {\r\n        resource._dequeue = dequeue;\r\n        resource._onCompleteBinding = resource.onComplete.once(this._onLoad, this);\r\n        resource.load();\r\n    };\r\n    Loader.prototype._onStart = function () {\r\n        this.progress = 0;\r\n        this.loading = true;\r\n        this.onStart.dispatch(this);\r\n    };\r\n    Loader.prototype._onComplete = function () {\r\n        this.progress = MAX_PROGRESS;\r\n        this.loading = false;\r\n        this.onComplete.dispatch(this, this.resources);\r\n    };\r\n    Loader.prototype._onLoad = function (resource) {\r\n        var _this = this;\r\n        resource._onCompleteBinding = null;\r\n        this._resourcesParsing.push(resource);\r\n        resource._dequeue();\r\n        eachSeries(this._middleware, function (middleware, next) {\r\n            middleware.fn.call(_this, resource, next);\r\n        }, function () {\r\n            resource.onAfterMiddleware.dispatch(resource);\r\n            _this.progress = Math.min(MAX_PROGRESS, _this.progress + resource.progressChunk);\r\n            _this.onProgress.dispatch(_this, resource);\r\n            if (resource.error)\r\n                _this.onError.dispatch(resource.error, _this, resource);\r\n            else\r\n                _this.onLoad.dispatch(_this, resource);\r\n            _this._resourcesParsing.splice(_this._resourcesParsing.indexOf(resource), 1);\r\n            if (_this._queue.idle() && _this._resourcesParsing.length === 0)\r\n                _this._onComplete();\r\n        }, true);\r\n    };\r\n    Loader.use = function (fn, priority) {\r\n        if (priority === void 0) { priority = Loader.DefaultMiddlewarePriority; }\r\n        Loader._defaultMiddleware.push({ fn: fn, priority: priority });\r\n        Loader._defaultMiddleware.sort(function (a, b) { return a.priority - b.priority; });\r\n        return Loader;\r\n    };\r\n    Loader.DefaultMiddlewarePriority = 50;\r\n    Loader._defaultMiddleware = [];\r\n    return Loader;\r\n}());\n\nexport { AbstractLoadStrategy, AudioLoadStrategy, ImageLoadStrategy, Loader, MediaElementLoadStrategy, Resource, ResourceState, ResourceType, VideoLoadStrategy, XhrLoadStrategy, XhrResponseType };\n//# sourceMappingURL=resource-loader.esm.js.map\n","/*!\n * type-signals - v1.1.0\n * https://github.com/englercj/type-signals\n * Compiled Wed, 22 Apr 2020 17:58:58 UTC\n *\n * type-signals is licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license\n */\nvar SignalBindingImpl = (function () {\r\n    function SignalBindingImpl(fn, once, thisArg) {\r\n        if (once === void 0) { once = false; }\r\n        this.next = null;\r\n        this.prev = null;\r\n        this.owner = null;\r\n        this.fn = fn;\r\n        this.once = once;\r\n        this.thisArg = thisArg;\r\n    }\r\n    SignalBindingImpl.prototype.detach = function () {\r\n        if (this.owner === null)\r\n            return false;\r\n        this.owner.detach(this);\r\n        return true;\r\n    };\r\n    SignalBindingImpl.prototype.dispose = function () {\r\n        this.detach();\r\n    };\r\n    return SignalBindingImpl;\r\n}());\r\nvar Signal = (function () {\r\n    function Signal() {\r\n        this._head = null;\r\n        this._tail = null;\r\n        this._filter = null;\r\n    }\r\n    Signal.prototype.handlers = function () {\r\n        var node = this._head;\r\n        var handlers = [];\r\n        while (node) {\r\n            handlers.push(node);\r\n            node = node.next;\r\n        }\r\n        return handlers;\r\n    };\r\n    Signal.prototype.hasAny = function () {\r\n        return !!this._head;\r\n    };\r\n    Signal.prototype.has = function (node) {\r\n        return node.owner === this;\r\n    };\r\n    Signal.prototype.dispatch = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var node = this._head;\r\n        if (!node)\r\n            return false;\r\n        if (this._filter && !this._filter.apply(this, args))\r\n            return false;\r\n        while (node) {\r\n            if (node.once)\r\n                this.detach(node);\r\n            node.fn.apply(node.thisArg, args);\r\n            node = node.next;\r\n        }\r\n        return true;\r\n    };\r\n    Signal.prototype.add = function (fn, thisArg) {\r\n        if (thisArg === void 0) { thisArg = null; }\r\n        return this._addSignalBinding(new SignalBindingImpl(fn, false, thisArg));\r\n    };\r\n    Signal.prototype.once = function (fn, thisArg) {\r\n        if (thisArg === void 0) { thisArg = null; }\r\n        return this._addSignalBinding(new SignalBindingImpl(fn, true, thisArg));\r\n    };\r\n    Signal.prototype.detach = function (node_) {\r\n        var node = node_;\r\n        if (node.owner !== this)\r\n            return this;\r\n        if (node.prev)\r\n            node.prev.next = node.next;\r\n        if (node.next)\r\n            node.next.prev = node.prev;\r\n        if (node === this._head) {\r\n            this._head = node.next;\r\n            if (node.next === null) {\r\n                this._tail = null;\r\n            }\r\n        }\r\n        else if (node === this._tail) {\r\n            this._tail = node.prev;\r\n            if (this._tail)\r\n                this._tail.next = null;\r\n        }\r\n        node.owner = null;\r\n        return this;\r\n    };\r\n    Signal.prototype.detachAll = function () {\r\n        var node = this._head;\r\n        if (!node)\r\n            return this;\r\n        this._head = null;\r\n        this._tail = null;\r\n        while (node) {\r\n            node.owner = null;\r\n            node = node.next;\r\n        }\r\n        return this;\r\n    };\r\n    Signal.prototype.filter = function (filter) {\r\n        this._filter = filter;\r\n    };\r\n    Signal.prototype.proxy = function () {\r\n        var _this = this;\r\n        var signals = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            signals[_i] = arguments[_i];\r\n        }\r\n        var fn = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return _this.dispatch.apply(_this, args);\r\n        };\r\n        for (var i = 0; i < signals.length; ++i) {\r\n            signals[i].add(fn);\r\n        }\r\n        return this;\r\n    };\r\n    Signal.prototype._addSignalBinding = function (node_) {\r\n        var node = node_;\r\n        if (!this._head) {\r\n            this._head = node;\r\n            this._tail = node;\r\n        }\r\n        else {\r\n            if (this._tail)\r\n                this._tail.next = node;\r\n            node.prev = this._tail;\r\n            this._tail = node;\r\n        }\r\n        node.owner = this;\r\n        return node;\r\n    };\r\n    return Signal;\r\n}());\n\nexport { Signal };\n//# sourceMappingURL=type-signals.esm.js.map\n","'use strict'\n\nmodule.exports = function parseURI (str, opts) {\n  opts = opts || {}\n\n  var o = {\n    key: ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'],\n    q: {\n      name: 'queryKey',\n      parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n    },\n    parser: {\n      strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n      loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n    }\n  }\n\n  var m = o.parser[opts.strictMode ? 'strict' : 'loose'].exec(str)\n  var uri = {}\n  var i = 14\n\n  while (i--) uri[o.key[i]] = m[i] || ''\n\n  uri[o.q.name] = {}\n  uri[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n    if ($1) uri[o.q.name][$1] = $2\n  })\n\n  return uri\n}\n","\"use strict\";\n\n/* globals document:readonly */\nvar bundleURL = null;\n\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  let matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","\"use strict\";\n\nvar resolve = require('./bundle-manifest').resolve;\n\nmodule.exports = function (fromId, toId) {\n  return relative(dirname(resolve(fromId)), resolve(toId));\n};\n\nfunction dirname(_filePath) {\n  if (_filePath === '') {\n    return '.';\n  }\n\n  var filePath = _filePath[_filePath.length - 1] === '/' ? _filePath.slice(0, _filePath.length - 1) : _filePath;\n  var slashIndex = filePath.lastIndexOf('/');\n  return slashIndex === -1 ? '.' : filePath.slice(0, slashIndex);\n}\n\nfunction relative(from, to) {\n  if (from === to) {\n    return '';\n  }\n\n  var fromParts = from.split('/');\n\n  if (fromParts[0] === '.') {\n    fromParts.shift();\n  }\n\n  var toParts = to.split('/');\n\n  if (toParts[0] === '.') {\n    toParts.shift();\n  } // Find where path segments diverge.\n\n\n  var i;\n  var divergeIndex;\n\n  for (i = 0; (i < toParts.length || i < fromParts.length) && divergeIndex == null; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      divergeIndex = i;\n    }\n  } // If there are segments from \"from\" beyond the point of divergence,\n  // return back up the path to that point using \"..\".\n\n\n  var parts = [];\n\n  for (i = 0; i < fromParts.length - divergeIndex; i++) {\n    parts.push('..');\n  } // If there are segments from \"to\" beyond the point of divergence,\n  // continue using the remaining segments.\n\n\n  if (toParts.length > divergeIndex) {\n    parts.push.apply(parts, toParts.slice(divergeIndex));\n  }\n\n  return parts.join('/');\n}\n\nmodule.exports._dirname = dirname;\nmodule.exports._relative = relative;","import { Loader } from 'resource-loader';\nimport bunnyUrl from 'url:./assets/bunny.png';\nimport megamanUrl from 'url:./assets/megaman.png';\nimport mapUrl from 'url:./assets/map.png';\nimport visitorFontUrl from 'url:./assets/fonts/visitor/visitor1.ttf';\nimport { getResolution } from './lib/screen';\n\nconst GAME_WIDTH = 384 * 2;\nconst GAME_HEIGHT = 216 * 2;\n\nconst SRC_GAME_WIDTH = 384;\nconst SRC_GAME_HEIGHT = 216;\n\nlet gameScale = 1;\n\nconst loader = new Loader();\n\nconst canvas = document.getElementById('canvas') as HTMLCanvasElement;\nconst ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\ncanvas.width = GAME_WIDTH;\ncanvas.height = GAME_HEIGHT;\nctx.imageSmoothingEnabled = false;\ncanvas.style.width = `${GAME_WIDTH}px`;\ncanvas.style.height = `${GAME_HEIGHT}px`;\n\nexport const IDENTITY_MATRIX: DOMMatrix2DInit = {\n  a: 2,\n  b: 0,\n  c: 0,\n  d: 2,\n  e: 0,\n  f: 0,\n};\n\nconst resize = () => {\n  // Scale canvas to fit window while maintaining 16x9\n  const { innerWidth, innerHeight } = window;\n  const { factor } = getResolution(\n    innerWidth,\n    innerHeight,\n    GAME_WIDTH,\n    GAME_HEIGHT,\n  );\n\n  gameScale = factor;\n\n  canvas.style.transform = `scale(${factor})`;\n  canvas.style.left = `${innerWidth / 2 - canvas.width / 2}px`;\n  canvas.style.top = `${innerHeight / 2 - canvas.height / 2}px`;\n};\n\nresize();\n\n// window.addEventListener('resize', resize);\n\nloader\n  .add(bunnyUrl)\n  .add(megamanUrl)\n  .add(mapUrl)\n  .add(visitorFontUrl)\n  .load(async (loader, resources) => {\n    const font = new FontFace('Visitor', `url(${visitorFontUrl})`);\n    const visitorFont = await font.load();\n    document.fonts.add(visitorFont);\n    const bunnyResource = resources[bunnyUrl]!;\n    const playerResource = resources[megamanUrl]!;\n    const mapResource = resources[mapUrl]!;\n\n    const player = {\n      pos: {\n        x: playerResource.data.width / 2,\n        y: canvas.height / 2 - playerResource.data.height / 2,\n      },\n      dir: {\n        x: 1,\n        y: 1,\n      },\n      vel: {\n        x: 60 * 2,\n        y: 60 * 2,\n      },\n      sprite: playerResource.data as HTMLImageElement,\n    };\n\n    const TARGET_FPS = 60;\n    const STEP = 1000 / TARGET_FPS;\n    let last = performance.now();\n    let deltaTimeAccumulator = 0;\n\n    function frame(hrt: DOMHighResTimeStamp) {\n      deltaTimeAccumulator += Math.min(1000, hrt - last);\n\n      const dt = Math.min(1000, hrt - last) / 1000;\n\n      player.pos.x += player.vel.x * dt * player.dir.x;\n      player.pos.y += player.vel.y * dt * player.dir.y;\n\n      if (player.pos.x + player.sprite.width * 2 >= GAME_WIDTH) {\n        player.pos.x = GAME_WIDTH - player.sprite.width * 2;\n        player.dir.x *= -1;\n      } else if (player.pos.x <= 0) {\n        player.pos.x = 0;\n        player.dir.x *= -1;\n      }\n\n      if (player.pos.y + player.sprite.height * 2 >= GAME_HEIGHT) {\n        player.pos.y = GAME_HEIGHT - player.sprite.height * 2;\n        player.dir.y *= -1;\n      } else if (player.pos.y <= 0) {\n        player.pos.y = 0;\n        player.dir.y *= -1;\n      }\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      ctx.setTransform(IDENTITY_MATRIX);\n\n      ctx.drawImage(mapResource.data, 0, 0);\n\n      ctx.fillStyle = 'white';\n      ctx.font = '10px Visitor';\n\n      ctx.setTransform(2, 0, 0, 2, player.pos.x, player.pos.y);\n\n      ctx.drawImage(player.sprite, 0, 0);\n\n      ctx.setTransform(IDENTITY_MATRIX);\n\n      last = hrt;\n      requestAnimationFrame(frame);\n    }\n\n    requestAnimationFrame(frame);\n  });\n","/**\n * Test a rectangle for perfect resolution scaling. Will return the closest\n * resolution or the `minWidth` and `minHeight`.\n * @param containerWidth width you want to test\n * @param containerHeight height you want to test\n * @param minWidth minimum width\n * @param minHeight minimum height\n */\nexport const getResolution = (\n  containerWidth: number,\n  containerHeight: number,\n  minWidth: number,\n  minHeight: number,\n) => {\n  // If the container is smaller than the minWidth x minHeight, limit\n  // to minWidth x minHeight.\n  if (containerWidth <= minWidth || containerHeight <= minHeight) {\n    return {\n      width: minWidth,\n      height: minHeight,\n      factor: 1,\n    };\n  }\n\n  // If the container is the exact aspect ratio of the original resolution,\n  // return a factor that reflects that.\n  if (containerWidth / containerHeight === minWidth / minHeight) {\n    const factor = containerWidth / minWidth;\n\n    return {\n      width: minWidth * factor,\n      height: minHeight * factor,\n      factor,\n    };\n  }\n\n  let factor = 1;\n  let width = minWidth * factor;\n  let height = minHeight * factor;\n\n  // Lastly, limit scale factor to whole increments while smaller than\n  // the container.\n  while (width <= containerWidth && height <= containerHeight) {\n    factor++;\n\n    width = minWidth * factor;\n    height = minHeight * factor;\n  }\n\n  factor--;\n\n  return {\n    width: minWidth * factor,\n    height: minHeight * factor,\n    factor,\n  };\n};\n"],"names":["$parcel$interopDefault","a","__esModule","default","$7d806a7a603c235ec027b73d847f4d95$var$mapping","id","resolved","Error","pairs","keys","Object","i","length","JSON","parse","$488c25a1e62f1cb474c29d401d755eba$export$ResourceType","ResourceType","$488c25a1e62f1cb474c29d401d755eba$export$ResourceState","ResourceState","$2d99be60b082bbddbc1254fd470eeb54$var$SignalBindingImpl","SignalBindingImpl","fn","once","thisArg","this","next","prev","owner","prototype","detach","dispose","$2d99be60b082bbddbc1254fd470eeb54$export$Signal","Signal","_head","_tail","_filter","handlers","node","push","hasAny","has","dispatch","args","_i","arguments","apply","add","_addSignalBinding","node_","detachAll","filter","proxy","_this","signals","str","opts","o","key","q","name","parser","strict","loose","m","strictMode","exec","uri","replace","$0","$1","$2","$488c25a1e62f1cb474c29d401d755eba$export$AbstractLoadStrategy","config","onError","onComplete","onProgress","$488c25a1e62f1cb474c29d401d755eba$var$extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","$488c25a1e62f1cb474c29d401d755eba$var$__extends","__","constructor","create","$488c25a1e62f1cb474c29d401d755eba$var$__spreadArrays","s","il","r","k","j","jl","$488c25a1e62f1cb474c29d401d755eba$var$getExtension","url","ext","indexOf","isDataUrl","slashIndex","substring","queryStart","hashStart","index","Math","min","lastIndexOf","toLowerCase","$488c25a1e62f1cb474c29d401d755eba$var$assertNever","x","$488c25a1e62f1cb474c29d401d755eba$export$XhrResponseType","XhrResponseType","$488c25a1e62f1cb474c29d401d755eba$export$MediaElementLoadStrategy","_super","MediaElementLoadStrategy","elementType","call","_boundOnLoad","_onLoad","bind","_boundOnError","_onError","_boundOnTimeout","_onTimeout","_element","_createElement","_elementTimer","load","crossOrigin","urls","sourceSet","navigator","isCocoonJS","src","mimeType","mimeTypes","undefined","source","document","createElement","type","appendChild","addEventListener","timeout","window","setTimeout","abort","_clearEvents","firstChild","removeChild","_error","loadElement","clearTimeout","removeEventListener","errMessage","_complete","resourceType","Unknown","Audio","Video","$488c25a1e62f1cb474c29d401d755eba$export$AudioLoadStrategy","AudioLoadStrategy","$488c25a1e62f1cb474c29d401d755eba$export$ImageLoadStrategy","ImageLoadStrategy","Image","$488c25a1e62f1cb474c29d401d755eba$export$VideoLoadStrategy","VideoLoadStrategy","$488c25a1e62f1cb474c29d401d755eba$var$useXdr","XDomainRequest","XMLHttpRequest","$488c25a1e62f1cb474c29d401d755eba$var$reqType","xhr","toString","$488c25a1e62f1cb474c29d401d755eba$export$XhrLoadStrategy","XhrLoadStrategy","_boundOnAbort","_onAbort","_boundOnProgress","_onProgress","_xhr","_createRequest","_xhrType","Default","xhrType","_determineXhrType","onload","onerror","ontimeout","onprogress","open","send","Json","Document","responseType","Text","_xhrTypeMap","data","text","status","responseText","Buffer","floor","response","Blob","_parseDocument","_parseJson","statusText","responseURL","DOMParser","parseFromString","Xml","div","innerHTML","e","event","lengthComputable","loaded","total","setExtensionXhrType","extname","ResponseType","xhtml","html","htm","xml","tmx","svg","tsx","gif","png","bmp","jpg","jpeg","tif","tiff","webp","tga","json","txt","ttf","otf","$488c25a1e62f1cb474c29d401d755eba$var$onlyOnce","func","callFn","$488c25a1e62f1cb474c29d401d755eba$var$AsyncQueue","AsyncQueue","worker","concurrency","workers","buffer","paused","_started","_tasks","onSaturated","onUnsaturated","onEmpty","onDrain","defineProperty","get","enumerable","configurable","reset","callback","_insert","unshift","process","task","shift","_next","running","idle","pause","resume","w","getTask","insertAtFront","err","$488c25a1e62f1cb474c29d401d755eba$export$Resource","Resource","options","children","onStart","onAfterMiddleware","error","progressChunk","_dequeue","_onCompleteBinding","_state","NotStarted","metadata","_determineCrossOrigin","strategy","_strategy","StrategyCtor","_loadStrategyMap","_defaultLoadStrategy","_progress","setDefaultLoadStrategy","setLoadStrategy","Loading","Complete","percent","loc","location","origin","_tempAnchor","href","parsed","samePort","port","protocol","host","hostname","svg+xml","mp3","ogg","wav","mp4","webm","mov","$488c25a1e62f1cb474c29d401d755eba$var$rgxExtractUrlHash","$488c25a1e62f1cb474c29d401d755eba$export$Loader","Loader","baseUrl","progress","loading","defaultQueryString","resources","onLoad","_baseUrl","_urlResolvers","_middleware","_resourcesParsing","_boundLoadResource","_loadResource","_queue","_defaultMiddleware","slice","set","charAt","url_","isArray","resOptions","parentResource","_prepareUrl","resource","parent_1","incompleteChildren","isComplete","eachChunk","use","priority","DefaultMiddlewarePriority","sort","res","isLoading","cb","_onStart","_onComplete","chunk","addUrlResolver","forEach","resolver","match","hash","substr","dequeue","array","iterator","deferNext","len","$488c25a1e62f1cb474c29d401d755eba$var$eachSeries","middleware","splice","$634f916bc30b7d6650877f3f4b6a8b3a$var$bundleURL","matches","stack","$634f916bc30b7d6650877f3f4b6a8b3a$var$getBundleURL","$824bc590bf0a3702ac7bd27152cb0639$var$resolve","$824bc590bf0a3702ac7bd27152cb0639$var$dirname","_filePath","filePath","$824bc590bf0a3702ac7bd27152cb0639$var$relative","from","to","fromParts","split","divergeIndex","toParts","parts","join","fromId","toId","_dirname","_relative","$bdb9dd0f939df5abec219481a515de1c$var$GAME_WIDTH","$bdb9dd0f939df5abec219481a515de1c$var$GAME_HEIGHT","$bdb9dd0f939df5abec219481a515de1c$var$gameScale","$bdb9dd0f939df5abec219481a515de1c$var$loader","$bdb9dd0f939df5abec219481a515de1c$var$canvas","getElementById","$bdb9dd0f939df5abec219481a515de1c$var$ctx","getContext","width","height","imageSmoothingEnabled","style","IDENTITY_MATRIX","c","f","innerWidth","innerHeight","factor","containerWidth","containerHeight","minWidth","minHeight","transform","left","top","$bdb9dd0f939df5abec219481a515de1c$var$resize","async","loader","font","FontFace","$445f94dbf072f2eb91a2a424e637f27d$$interop$default","visitorFont","fonts","playerResource","mapResource","player","pos","y","dir","vel","sprite","last","performance","now","deltaTimeAccumulator","requestAnimationFrame","frame","hrt","dt","clearRect","setTransform","drawImage","fillStyle"],"version":3,"file":"index.b6192936.js.map"}