!function(){function t(t){return t&&t.__esModule?t.default:t}var e,r,n,o,i=function(){var t={exports:this};return function(e){function r(t){if(n=g(r),!(t<s+d)){for(i+=t-s,s=t,w(t,i),t>l+h&&(a=u*p*1e3/(t-l)+(1-u)*a,l=t,p=0),p++,c=0;i>=o;)if(x(o),i-=o,++c>=240){m=!0;break}E(i/o),T(a,m),m=!1}}var n,o=1e3/60,i=0,s=0,a=60,u=.9,h=1e3,l=0,p=0,c=0,d=0,f=!1,_=!1,m=!1,y="object"==typeof window?window:e,g=y.requestAnimationFrame||function(){var t,e,r=Date.now();return function(n){return t=Date.now(),e=Math.max(0,o-(t-r)),r=t+e,setTimeout((function(){n(t+e)}),e)}}(),v=y.cancelAnimationFrame||clearTimeout,b=function(){},w=b,x=b,E=b,T=b;e.MainLoop={getSimulationTimestep:function(){return o},setSimulationTimestep:function(t){return o=t,this},getFPS:function(){return a},getMaxAllowedFPS:function(){return 1e3/d},setMaxAllowedFPS:function(t){return void 0===t&&(t=1/0),0===t?this.stop():d=1e3/t,this},resetFrameDelta:function(){var t=i;return i=0,t},setBegin:function(t){return w=t||w,this},setUpdate:function(t){return x=t||x,this},setDraw:function(t){return E=t||E,this},setEnd:function(t){return T=t||T,this},start:function(){return _||(_=!0,n=g((function(t){E(1),f=!0,s=t,l=t,p=0,n=g(r)}))),this},stop:function(){return f=!1,_=!1,v(n),this},isRunning:function(){return f}},"object"==typeof t&&null!==t&&"object"==typeof t.exports&&(t.exports=e.MainLoop)}(this),t.exports}.call({}),s=function(){function t(t,e,r){void 0===e&&(e=!1),this.next=null,this.prev=null,this.owner=null,this.fn=t,this.once=e,this.thisArg=r}return t.prototype.detach=function(){return null!==this.owner&&(this.owner.detach(this),!0)},t.prototype.dispose=function(){this.detach()},t}(),a=function(){function t(){this._head=null,this._tail=null,this._filter=null}return t.prototype.handlers=function(){for(var t=this._head,e=[];t;)e.push(t),t=t.next;return e},t.prototype.hasAny=function(){return!!this._head},t.prototype.has=function(t){return t.owner===this},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this._head;if(!r)return!1;if(this._filter&&!this._filter.apply(this,t))return!1;for(;r;)r.once&&this.detach(r),r.fn.apply(r.thisArg,t),r=r.next;return!0},t.prototype.add=function(t,e){return void 0===e&&(e=null),this._addMiniSignalBinding(new s(t,!1,e))},t.prototype.once=function(t,e){return void 0===e&&(e=null),this._addMiniSignalBinding(new s(t,!0,e))},t.prototype.detach=function(t){return t.owner!==this?this:(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._head?(this._head=t.next,null===t.next&&(this._tail=null)):t===this._tail&&(this._tail=t.prev,this._tail&&(this._tail.next=null)),t.owner=null,this)},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=null,this._tail=null;t;)t.owner=null,t=t.next;return this},t.prototype.filter=function(t){this._filter=t},t.prototype.proxy=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.dispatch.apply(t,e)},o=0;o<e.length;++o)e[o].add(n);return this},t.prototype._addMiniSignalBinding=function(t){return this._head?(this._tail&&(this._tail.next=t),t.prev=this._tail,this._tail=t):(this._head=t,this._tail=t),t.owner=this,t},t}(),u=function(t){this.config=t,this.onError=new a,this.onComplete=new a,this.onProgress=new a},h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function l(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function p(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n}function c(t){var e="";if(0===t.indexOf("data:")){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),o=t.indexOf("#"),i=Math.min(n>-1?n:t.length,o>-1?o:t.length);e=(t=t.substring(0,i)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()}function d(t){throw new Error("Unexpected value. Should have been never.")}(r=e||(e={}))[r.Unknown=0]="Unknown",r[r.Buffer=1]="Buffer",r[r.Blob=2]="Blob",r[r.Json=3]="Json",r[r.Xml=4]="Xml",r[r.Image=5]="Image",r[r.Audio=6]="Audio",r[r.Video=7]="Video",r[r.Text=8]="Text",(o=n||(n={}))[o.NotStarted=0]="NotStarted",o[o.Loading=1]="Loading",o[o.Complete=2]="Complete";var f,_,m=function(t){function r(e,r){var n=t.call(this,e)||this;return n.elementType=r,n._boundOnLoad=n._onLoad.bind(n),n._boundOnError=n._onError.bind(n),n._boundOnTimeout=n._onTimeout.bind(n),n._element=n._createElement(),n._elementTimer=0,n}return l(r,t),r.prototype.load=function(){var t=this.config;t.crossOrigin&&(this._element.crossOrigin=t.crossOrigin);var e=t.sourceSet||[t.url];if(navigator.isCocoonJS)this._element.src=e[0];else for(var r=0;r<e.length;++r){var n=e[r],o=t.mimeTypes?t.mimeTypes[r]:void 0;o||(o=this.elementType+"/"+c(n));var i=document.createElement("source");i.src=n,i.type=o,this._element.appendChild(i)}this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("canplaythrough",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),this._element.load(),t.timeout&&(this._elementTimer=window.setTimeout(this._boundOnTimeout,t.timeout))},r.prototype.abort=function(){for(this._clearEvents();this._element.firstChild;)this._element.removeChild(this._element.firstChild);this._error(this.elementType+" load aborted by the user.")},r.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:document.createElement(this.elementType)},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("canplaythrough",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},r.prototype._error=function(t){this._clearEvents(),this.onError.dispatch(t)},r.prototype._complete=function(){this._clearEvents();var t=e.Unknown;switch(this.elementType){case"audio":t=e.Audio;break;case"video":t=e.Video;break;default:d(this.elementType)}this.onComplete.dispatch(t,this._element)},r.prototype._onLoad=function(){this._complete()},r.prototype._onError=function(){this._error(this.elementType+" failed to load.")},r.prototype._onTimeout=function(){this._error(this.elementType+" load timed out.")},r}(u),y=function(t){function e(e){return t.call(this,e,"audio")||this}return l(e,t),e}(m),g=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e._boundOnLoad=e._onLoad.bind(e),e._boundOnError=e._onError.bind(e),e._boundOnTimeout=e._onTimeout.bind(e),e._element=e._createElement(),e._elementTimer=0,e}return l(r,t),r.prototype.load=function(){var t=this.config;t.crossOrigin&&(this._element.crossOrigin=t.crossOrigin),this._element.src=t.url,this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),t.timeout&&(this._elementTimer=window.setTimeout(this._boundOnTimeout,t.timeout))},r.prototype.abort=function(){this._clearEvents(),this._element.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",this._error("Image load aborted by the user.")},r.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:document.createElement("img")},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},r.prototype._error=function(t){this._clearEvents(),this.onError.dispatch(t)},r.prototype._complete=function(){this._clearEvents(),this.onComplete.dispatch(e.Image,this._element)},r.prototype._onLoad=function(){this._complete()},r.prototype._onError=function(){this._error("Image failed to load.")},r.prototype._onTimeout=function(){this._error("Image load timed out.")},r}(u),v=function(t){function e(e){return t.call(this,e,"video")||this}return l(e,t),e}(m),b=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest);function w(t){return t.toString().replace("object ","")}(_=f||(f={})).Default="text",_.Buffer="arraybuffer",_.Blob="blob",_.Document="document",_.Json="json",_.Text="text";var x=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e._boundOnLoad=e._onLoad.bind(e),e._boundOnAbort=e._onAbort.bind(e),e._boundOnError=e._onError.bind(e),e._boundOnTimeout=e._onTimeout.bind(e),e._boundOnProgress=e._onProgress.bind(e),e._xhr=e._createRequest(),e._xhrType=f.Default,e}return l(r,t),r.prototype.load=function(){var t=this.config,e=c(t.url);"string"!=typeof t.xhrType&&(t.xhrType=this._determineXhrType(e));var r=this._xhr;this._xhrType=t.xhrType||f.Default,b?(r.timeout=t.timeout||5e3,r.onload=this._boundOnLoad,r.onerror=this._boundOnError,r.ontimeout=this._boundOnTimeout,r.onprogress=this._boundOnProgress,r.open("GET",t.url,!0),setTimeout((function(){r.send()}),0)):(r.open("GET",t.url,!0),t.timeout&&(r.timeout=t.timeout),t.xhrType===f.Json||t.xhrType===f.Document?r.responseType=f.Text:r.responseType=t.xhrType,r.addEventListener("load",this._boundOnLoad,!1),r.addEventListener("abort",this._boundOnAbort,!1),r.addEventListener("error",this._boundOnError,!1),r.addEventListener("timeout",this._boundOnTimeout,!1),r.addEventListener("progress",this._boundOnProgress,!1),r.send())},r.prototype.abort=function(){b?(this._clearEvents(),this._xhr.abort(),this._onAbort()):this._xhr.abort()},r.prototype._createRequest=function(){return b?new window.XDomainRequest:new XMLHttpRequest},r.prototype._determineXhrType=function(t){return r._xhrTypeMap[t]||f.Default},r.prototype._clearEvents=function(){b?(this._xhr.onload=null,this._xhr.onerror=null,this._xhr.ontimeout=null,this._xhr.onprogress=null):(this._xhr.removeEventListener("load",this._boundOnLoad,!1),this._xhr.removeEventListener("abort",this._boundOnAbort,!1),this._xhr.removeEventListener("error",this._boundOnError,!1),this._xhr.removeEventListener("timeout",this._boundOnTimeout,!1),this._xhr.removeEventListener("progress",this._boundOnProgress,!1))},r.prototype._error=function(t){this._clearEvents(),this.onError.dispatch(t)},r.prototype._complete=function(t,e){this._clearEvents(),this.onComplete.dispatch(t,e)},r.prototype._onLoad=function(){var t=this._xhr,r="",n=void 0===t.status?200:t.status;if(void 0!==t.responseType&&""!==t.responseType&&"text"!==t.responseType||(r=t.responseText),0===n&&(r.length>0||t.responseType===f.Buffer)?n=200:1223===n&&(n=204),200===100*Math.floor(n/100))switch(this._xhrType){case f.Buffer:this._complete(e.Buffer,t.response);break;case f.Blob:this._complete(e.Blob,t.response);break;case f.Document:this._parseDocument(r);break;case f.Json:this._parseJson(r);break;case f.Default:case f.Text:this._complete(e.Text,r);break;default:d(this._xhrType)}else this._error("["+t.status+"] "+t.statusText+": "+t.responseURL)},r.prototype._parseDocument=function(t){try{if(window.DOMParser){var r=(new DOMParser).parseFromString(t,"text/xml");this._complete(e.Xml,r)}else{var n=document.createElement("div");n.innerHTML=t,this._complete(e.Xml,n)}}catch(t){this._error("Error trying to parse loaded xml: "+t)}},r.prototype._parseJson=function(t){try{var r=JSON.parse(t);this._complete(e.Json,r)}catch(t){this._error("Error trying to parse loaded json: "+t)}},r.prototype._onAbort=function(){var t=this._xhr;this._error(w(t)+" Request was aborted by the user.")},r.prototype._onError=function(){var t=this._xhr;this._error(w(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},r.prototype._onTimeout=function(){var t=this._xhr;this._error(w(t)+" Request timed out.")},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(t.loaded/t.total)},r.setExtensionXhrType=function(t,e){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(r._xhrTypeMap[t]=e)},r.ResponseType=f,r._xhrTypeMap={xhtml:f.Document,html:f.Document,htm:f.Document,xml:f.Document,tmx:f.Document,svg:f.Document,tsx:f.Document,gif:f.Blob,png:f.Blob,bmp:f.Blob,jpg:f.Blob,jpeg:f.Blob,tif:f.Blob,tiff:f.Blob,webp:f.Blob,tga:f.Blob,json:f.Json,text:f.Text,txt:f.Text,ttf:f.Buffer,otf:f.Buffer},r}(u);function E(t){var e=t;return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(null===e)throw new Error("Callback was already called.");var n=e;return e=null,n.apply(this,t)}}var T=function(){function t(t,e){if(void 0===e&&(e=1),this.worker=t,this.concurrency=e,this.workers=0,this.buffer=0,this.paused=!1,this._started=!1,this._tasks=[],this.onSaturated=new a,this.onUnsaturated=new a,this.onEmpty=new a,this.onDrain=new a,this.onError=new a,0===e)throw new Error("Concurrency must not be zero");this.buffer=e/4}return Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.onDrain.detachAll(),this.workers=0,this._started=!1,this._tasks=[]},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.process=function(){for(;!this.paused&&this.workers<this.concurrency&&this._tasks.length;){var t=this._tasks.shift();0===this._tasks.length&&this.onEmpty.dispatch(),this.workers+=1,this.workers===this.concurrency&&this.onSaturated.dispatch(),this.worker(t.data,E(this._next(t)))}},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.prototype.getTask=function(t){return this._tasks[t]},t.prototype._insert=function(t,e,r){var n=this;if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(this._started=!0,null==t&&this.idle())setTimeout((function(){return n.onDrain.dispatch()}),1);else{var o={data:t,callback:r};e?this._tasks.unshift(o):this._tasks.push(o),setTimeout((function(){return n.process()}),1)}},t.prototype._next=function(t){var e=this;return function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.workers-=1,t.callback&&t.callback.apply(t,p([r],n)),r&&e.onError.dispatch(r,t.data),e.workers<=e.concurrency-e.buffer&&e.onUnsaturated.dispatch(),e.idle()&&e.onDrain.dispatch(),e.process()}},t}(),O=t((function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),o={},i=14;i--;)o[r.key[i]]=n[i]||"";return o[r.q.name]={},o[r.key[12]].replace(r.q.parser,(function(t,e,n){e&&(o[r.q.name][e]=n)})),o})),L=function(){function t(r,o){if(this.children=[],this.onStart=new a,this.onProgress=new a,this.onComplete=new a,this.onAfterMiddleware=new a,this.data=null,this.type=e.Unknown,this.error="",this.progressChunk=0,this._dequeue=function(){},this._onCompleteBinding=null,this._state=n.NotStarted,this.name=r,"string"!=typeof o.crossOrigin&&(o.crossOrigin=this._determineCrossOrigin(o.url)),o.strategy&&"function"!=typeof o.strategy)this._strategy=o.strategy,this._strategy.config=o;else{var i=o.strategy;i||(i=t._loadStrategyMap[c(o.url)]),i||(i=t._defaultLoadStrategy),this._strategy=new i(o)}this._strategy.onError.add(this._error,this),this._strategy.onComplete.add(this._complete,this),this._strategy.onProgress.add(this._progress,this)}return t.setDefaultLoadStrategy=function(e){t._defaultLoadStrategy=e},t.setLoadStrategy=function(e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t._loadStrategyMap[e]=r)},Object.defineProperty(t.prototype,"url",{get:function(){return this._strategy.config.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._state===n.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._state===n.Complete},enumerable:!0,configurable:!0}),t.prototype.abort=function(){this._strategy.abort()},t.prototype.load=function(){this._state=n.Loading,this.onStart.dispatch(this),this._strategy.load()},t.prototype._error=function(t){this._state=n.Complete,this.error=t,this.onComplete.dispatch(this)},t.prototype._complete=function(t,e){this._state=n.Complete,this.type=t,this.data=e,this.onComplete.dispatch(this)},t.prototype._progress=function(t){this.onProgress.dispatch(this,t)},t.prototype._determineCrossOrigin=function(e,r){if(void 0===r&&(r=window.location),0===e.indexOf("data:")||0===e.indexOf("javascript:"))return"";if(window.origin!==window.location.origin)return"anonymous";t._tempAnchor||(t._tempAnchor=document.createElement("a")),t._tempAnchor.href=e;var n=O(t._tempAnchor.href,{strictMode:!0}),o=!n.port&&""===r.port||n.port===r.port,i=n.protocol?n.protocol+":":"";return n.host===r.hostname&&o&&i===r.protocol?"":"anonymous"},t._tempAnchor=null,t._defaultLoadStrategy=x,t._loadStrategyMap={gif:g,png:g,bmp:g,jpg:g,jpeg:g,tif:g,tiff:g,webp:g,tga:g,svg:g,"svg+xml":g,mp3:y,ogg:y,wav:y,mp4:v,webm:v,mov:v},t}();var A=/(#[\w-]+)?$/,C=function(){function t(e,r){void 0===e&&(e=""),void 0===r&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this.resources={},this.onError=new a,this.onLoad=new a,this.onStart=new a,this.onComplete=new a,this.onProgress=new a,this._baseUrl="",this._urlResolvers=[],this._middleware=[],this._resourcesParsing=[],this._boundLoadResource=this._loadResource.bind(this),this.baseUrl=e,this._queue=new T(this._boundLoadResource,r),this._queue.pause(),this._middleware=t._defaultMiddleware.slice()}return Object.defineProperty(t.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){for(;t.length&&"/"===t.charAt(t.length-1);)t=t.slice(0,-1);this._baseUrl=t},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}var n="",o="",i=this._baseUrl,s={url:""};if("object"==typeof t?(n=t.url,o=t.name||t.url,i=t.baseUrl||i,s=t):(o=t,n="string"==typeof e?e:o),!n)throw new Error("You must specify the `url` property.");if(this.loading&&!s.parentResource)throw new Error("Cannot add root resources while the loader is running.");if(this.resources[o])throw new Error('Resource named "'+o+'" already exists.');n=this._prepareUrl(n,i),s.url=n;var a=new L(o,s);if(this.resources[o]=a,"function"==typeof s.onComplete&&a.onAfterMiddleware.once(s.onComplete),this.loading){var u=s.parentResource,h=[];for(r=0;r<u.children.length;++r)u.children[r].isComplete||h.push(u.children[r]);var l=u.progressChunk*(h.length+1)/(h.length+2);u.children.push(a),u.progressChunk=l;for(r=0;r<h.length;++r)h[r].progressChunk=l;a.progressChunk=l}return this._queue.push(a),this},t.prototype.use=function(e,r){return void 0===r&&(r=t.DefaultMiddlewarePriority),this._middleware.push({fn:e,priority:r}),this._middleware.sort((function(t,e){return t.priority-e.priority})),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.reset(),this._queue.pause(),this.resources){var e=this.resources[t];e&&(e._onCompleteBinding&&e._onCompleteBinding.detach(),e.isLoading&&e.abort())}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue.length(),r=0;r<this._queue.length();++r)this._queue.getTask(r).data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!0,configurable:!0}),t.prototype.addUrlResolver=function(t){return this._urlResolvers.push(t),this},t.prototype._prepareUrl=function(t,e){var r=O(t,{strictMode:!0});if(this._urlResolvers.forEach((function(e){t=e(t,r),r=O(t,{strictMode:!0})})),r.protocol||0===t.indexOf("//")||(t=e.length&&"/"!==t.charAt(0)?e+"/"+t:e+t),this.defaultQueryString){var n=A.exec(t);if(n){var o=n[0];-1!==(t=t.substr(0,t.length-o.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=o}}return t},t.prototype._loadResource=function(t,e){t._dequeue=e,t._onCompleteBinding=t.onComplete.once(this._onLoad,this),t.load()},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onCompleteBinding=null,this._resourcesParsing.push(t),t._dequeue(),function(t,e,r,n){void 0===n&&(n=!1);var o=0,i=t.length;!function s(a){a||o===i?r&&r(a):n?setTimeout((function(){return e(t[o++],s)}),1):e(t[o++],s)}()}(this._middleware,(function(r,n){r.fn.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.use=function(e,r){return void 0===r&&(r=t.DefaultMiddlewarePriority),t._defaultMiddleware.push({fn:e,priority:r}),t._defaultMiddleware.sort((function(t,e){return t.priority-e.priority})),t},t.DefaultMiddlewarePriority=50,t._defaultMiddleware=[],t}(),k=new C,P=document.getElementById("canvas"),S=P.getContext("2d");P.width=384,P.height=216,S.imageSmoothingEnabled=!1,P.style.width="".concat(384,"px"),P.style.height="".concat(216,"px");var M={a:1,b:0,c:0,d:1,e:0,f:0},B=function(){var t=window,e=t.innerWidth,r=t.innerHeight,n=function(t,e,r,n){if(t<=r||e<=n)return{width:r,height:n,factor:1};if(t/e==r/n){var o=t/r;return{width:r*o,height:n*o,factor:o}}for(var i=1,s=r*i,a=n*i;s<=t&&a<=e;)s=r*++i,a=n*i;return{width:r*--i,height:n*i,factor:i}}(e,r,384,216).factor;P.style.transform="scale(".concat(n,")"),P.style.left="".concat(e/2-P.width/2,"px"),P.style.top="".concat(r/2-P.height/2,"px")};B(),window.addEventListener("resize",B);var D=t("/bunny.24c514f5.png"),q=t(i);k.add(D).load((function(t,e){var r=e[D];if(null==r)throw new Error("Could not load ".concat(D));var n={pos:{x:r.data.width/2,y:P.height/2-r.data.height/2},lastPos:{x:r.data.width/2,y:P.height/2-r.data.height/2},vel:{x:30,y:0},sprite:r.data};q.setUpdate((function(t){t/=1e3,n.lastPos.x=n.pos.x,n.lastPos.y=n.pos.y,n.pos.x+=n.vel.x*t,n.pos.y+=n.vel.y*t})).setDraw((function(t){var e=n.lastPos.x+(n.pos.x-n.lastPos.x)*t,r=n.lastPos.y+(n.pos.y-n.lastPos.y)*t;S.clearRect(0,0,P.width,P.height),S.translate(e,r),S.drawImage(n.sprite,0,0),S.setTransform(M)})).start()}))}();